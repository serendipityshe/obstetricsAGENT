# TO DO

- ## 知识库构建(knowledge_base)

- [X] 文档加载器
- [X] 文档解析器
- [X] 嵌入模型
- [X] 向量存储
- [X] 专家知识库
- [ ] 用户个人知识库
  - [ ] 孕妇个人数据库（MySQL）

- ## 提示词工程

- [X] LLM提示词工程
  - [X] 使用小模型进行提示词模板选择(all-miniLM-L6-v2)
- [X] Rag提示词工程

- ## LLM模块

- [ ] 本地大模型调用
  - [ ] RLHF(使用GSPO强化学习算法对模型进行微调)
- [X] 云端大模型调用

- ## RAG模块

- [X] 检索模块
  - [X] 专家知识库检索
  - [ ] 用户个人知识库检索
- [X] 生成
  - [ ] 结合两个知识库检索内容进行生成
- [ ] 后处理
- [ ] 链

- ## 评估模块

- [ ] 评估指标
- [ ] 检索模块评估
- [ ] 生成模块评估
- [ ] 用户反馈分析

```mermaid
flowchart LR
    %% 1. 用户与前端
    A[用户（小程序）] --> A1[上传图片/文档]
    A --> A2[提问/补充信息]
    A2 --> B[前端本地数据库]
    
    %% 2. 核心Agent处理
    A1 --> C[ImgProcAgent] --> C1[提取图片关键信息] --> D[MixAgent]
    A1 --> E[DocProcAgent] --> E1[解析文档结构化数据] --> D
    B --> F[MemAgent] --> F1[短期记忆] --> D
    F --> F2[长期记忆→向量化] --> G[个人向量库]
    
    %% 3. 检索与回答
    H[RetrAgent] --> H1[检索专家知识库]
    H --> H2[检索个人向量库+用户文件]
    H1 & H2 --> I[整合检索结果]
    D --> D1[统一格式/去冗余] --> J[GenAgent]
    I --> J --> K[生成最终回答]
    
    %% 4. 闭环
    K --> L[返回用户]
    K --> B
```